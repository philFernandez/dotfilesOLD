#!/bin/bash

COURSE="$1"
ASSIG="$2"
DUEDATE="$3"
STATS=~/.reminders/STAT50
MUSIC=~/.reminders/MUSC129
CSC133=~/.reminders/CSC133
CSC139=~/.reminders/CSC139

recordAssig() {
  local theCourseWriteFile=$1
  local theAssignment=$2
  local theDueDate=$3
  printf  "%s - Due: %s\n" "$theAssignment" "$theDueDate" >> "$theCourseWriteFile"
}

removeAssig() {
  local theCourse=$1
  local theLineNumber=$2
  gsed -i -e "${theLineNumber}d" "$theCourse"
}

usage() {
  echo "ADD:"
  echo "usage: $(basename "$0") <[stats][music][csc133][csc139]> <assignment> <due date>"
  echo "DELETE:"
  echo "usage: $(basename "$0") <[stats][music][csc133][csc139]> -d <line number>"
}


if [ -d ~/.reminders ]; then
  if [ $# == 3 ]; then
    case $COURSE in
      "stats")
        if [ "$2" == '-d' ]; then # TODO: check if $3 is a number
          removeAssig "$STATS" "$3"
        else
          recordAssig "$STATS" "$ASSIG" "$DUEDATE"
        fi
        ;;
      "music")
        if [ "$2" == '-d' ]; then
          removeAssig "$MUSIC" "$3"
        else
          recordAssig "$MUSIC" "$ASSIG" "$DUEDATE"
        fi
        ;;
      "csc133")
        if [ "$2" == '-d' ]; then
          removeAssig "$CSC133" "$3"
        else
          recordAssig "$CSC133" "$ASSIG" "$DUEDATE"
        fi
        ;;
      "csc139")
        if [ "$2" == '-d' ]; then
          removeAssig "$CSC139" "$3"
        else
          recordAssig "$CSC139" "$ASSIG" "$DUEDATE"
        fi
        ;;
      *)
        echo 'invalid input'
        usage
        ;;
    esac
  else
    usage
  fi
else
  echo 'run command: <remon> before adding reminder'
fi


