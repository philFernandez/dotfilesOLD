set alias_file = "~/.neomutt/aliases"
source $alias_file

# Incoming
set folder = "imaps://pfernandez@csus.edu@outlook.office365.com:993"
# Outgoing
set smtp_url = "smtp://pfernandez@csus.edu@smtp.office365.com:587"

set ascii_chars = "yes"

set from = "pfernandez@csus.edu"
set realname = "Phil Fernandez"

set imap_pass = "`gpg --batch -q --decrypt ~/.neomutt/account.gpg`"
set smtp_pass = "`gpg --batch -q --decrypt ~/.neomutt/account.gpg`"

# Mailboxes
set spoolfile = "+INBOX"
set trash = "+Deleted Items"
unset record
set postponed = "+Drafts"
# This is not all of the folders inside my Outlook account.
# These are just the most useful.
mailboxes "=INBOX"
mailboxes "=Grading_Work"
mailboxes "=Drafts"
mailboxes "=Deleted Items"
mailboxes "=Advising Appointments"
mailboxes "=Sac State Financial Aid"
mailboxes "=SAVED"
mailboxes "=Senior Project"
mailboxes "=Tutoring Zoom Servers"
mailboxes "=Sent Items"

set mailcap_path = "/Users/philthy/.neomutt/mailcap"
auto_view text/html

source /usr/local/share/doc/neomutt/samples/gpg.rc
set pgp_default_key = "0xF839B273A4B419876C3CA57D5DDCB5B8DB8DEF8C"

# Makes faster
set sleep_time = 0
set sort = "reverse-date"
set noconfirmappend		# don't ask me if i want to append to mailboxes

# Cache
set header_cache = "~/.neomutt/cache/headers/"
set message_cachedir = "~/.neomutt/cache/"

# Notifications
set new_mail_command="terminal-notifier -title '%v' -subtitle 'New Mail' \
-message '%n new messages, %u unread.'"



# Keybindings -----------------
bind pager g noop
bind pager gg noop
bind pager gg top
bind pager G bottom
# Scroll up and down window with K and J
bind pager K  previous-line #scroll inside the message rather than the index
bind pager J next-line"

bind pager <up> previous-line #scroll inside the message rather than the index
bind pager <down> next-line"

# Bind 'P' to REALLY delete an email
bind index P purge-message

# Move the highlight to the previous mailbox
bind index,pager \Cp sidebar-prev
# Move the highlight to the next mailbox
bind index,pager \Cn sidebar-next
# Open the highlighted mailbox
bind index,pager <F5> sidebar-open
# Move the highlight to the previous page
# This is useful if you have a LOT of mailboxes.
bind index,pager <F3> sidebar-page-up
# Move the highlight to the next page
# This is useful if you have a LOT of mailboxes.
bind index,pager <F4> sidebar-page-down
# Move the highlight to the previous mailbox containing new, or flagged,
# mail.
#bind index,pager <F5> sidebar-prev-new
# Move the highlight to the next mailbox containing new, or flagged, mail.
bind index,pager <F6> sidebar-next-new
# Toggle the visibility of the Sidebar.
bind index,pager B sidebar-toggle-visible

# Example NeoMutt config file for the sidebar feature.

# --------------------------------------------------------------------------
# VARIABLES – shown with their default values
# --------------------------------------------------------------------------
# Should the Sidebar be shown?
set sidebar_visible = no
# How wide should the Sidebar be in screen columns?

# Note: Some characters, e.g. Chinese, take up two columns each.
set sidebar_width = 35
# Should the mailbox paths be abbreviated?
set sidebar_short_path = no
# Number of top-level mailbox path subdirectories to truncate for display
set sidebar_component_depth = 0
# When abbreviating mailbox path names, use any of these characters as path
# separators. Only the part after the last separators will be shown.
# For file folders '/' is good. For IMAP folders, often '.' is useful.
set sidebar_delim_chars = '/.'
# If the mailbox path is abbreviated, should it be indented?
set sidebar_folder_indent = no
# Indent mailbox paths with this string.
set sidebar_indent_string = '  '
# Make the Sidebar only display mailboxes that contain new, or flagged,
# mail.
set sidebar_new_mail_only = no
# Any mailboxes that are whitelisted will always be visible, even if the
# sidebar_new_mail_only option is enabled.
set sidebar_non_empty_mailbox_only = no
# Only show mailboxes that contain some mail
sidebar_whitelist '/home/user/mailbox1'
sidebar_whitelist '/home/user/mailbox2'
# When searching for mailboxes containing new mail, should the search wrap
# around when it reaches the end of the list?
set sidebar_next_new_wrap = no
# Show the Sidebar on the right-hand side of the screen
set sidebar_on_right = no
# The character to use as the divider between the Sidebar and the other NeoMutt
# panels.
set sidebar_divider_char = '|'
# Enable extended mailbox mode to calculate total, new, and flagged
# message counts for each mailbox.
set mail_check_stats
# Display the Sidebar mailboxes using this format string.
set sidebar_format = '%B%?F? [%F]?%* %?N?%N/?%S'
# Sort the mailboxes in the Sidebar using this method:
#       count    – total number of messages
#       flagged  – number of flagged messages
#       new      – number of new messages
#       path     – mailbox path
#       unsorted – do not sort the mailboxes
set sidebar_sort_method = 'unsorted'

# MACROS
#macro compose \e5 "F pandoc -c ~/.neomutt/pandoc.css -s -f markdown -t html \ny^T^Utext/html; charset=utf-8\n"
macro compose \e5 "F pandoc -s -H ~/.neomutt/pandoc.html \
  -f markdown -t html \ny^T^Utext/html; charset=utf-8\n"
set wait_key = "no"

# --------------------------------------------------------------------------
# COLORS – some unpleasant examples are given
# --------------------------------------------------------------------------
# Note: All color operations are of the form:
#       color OBJECT FOREGROUND BACKGROUND
# Color of the current, open, mailbox
# Note: This is a general NeoMutt option which colors all selected items.
color indicator cyan black
# Sidebar-specific color of the selected item
color sidebar_indicator cyan black
# Color of the highlighted, but not open, mailbox.
color sidebar_highlight black color8
# Color of the divider separating the Sidebar from NeoMutt panels
color sidebar_divider color8 black
# Color to give mailboxes containing flagged mail
color sidebar_flagged red black
# Color to give mailboxes containing new mail
color sidebar_new green black
# Color to give mailboxes containing no new/flagged mail, etc.
color sidebar_ordinary color245 default
# Color to give the spoolfile mailbox
color sidebar_spoolfile color207 default
# Color to give mailboxes containing no unread mail
color sidebar_unread color136 default
# --------------------------------------------------------------------------

# general ------------ foreground ---- background -----------------------------
color error      color231 color212
color indicator  color231 color241
color markers    color210 default
color message    default  default
color normal     default  default
color prompt     default  default
color search     color84  default
color status     color141 color236
color tilde      color231 default
color tree       color141 default

# message index ------ foreground ---- background -----------------------------
color index      color210 default ~D                                                # deleted messages
color index      color84  default ~F                                                # flagged messages
color index      color117 default ~N                                                # new messages
color index      color212 default ~Q                                                # messages which have been replied to
color index      color215 default ~T                                                # tagged messages
color index      color141 default ~v                                                # messages part of a collapsed thread

# message headers ---- foreground ---- background -----------------------------
color hdrdefault color117 default
color header     color231 default ^Subject:.*
# message body ------- foreground ---- background -----------------------------
color attachment color228 default
color body       color231 default [\-\.+_a-zA-Z0-9]+@[\-\.a-zA-Z0-9]+               # email addresses
color body       color228 default (https?|ftp)://[\-\.,/%~_:?&=\#a-zA-Z0-9]+        # URLs
color body       color231 default (^|[[:space:]])\\*[^[:space:]]+\\*([[:space:]]|$) # *bold* text
color body       color231 default (^|[[:space:]])_[^[:space:]]+_([[:space:]]|$)     # _underlined_ text
color body       color231 default (^|[[:space:]])/[^[:space:]]+/([[:space:]]|$)     # /italic/ text
color quoted     color61  default
color quoted1    color117 default
color quoted2    color84  default
color quoted3    color215 default
color quoted4    color212 default
color signature  color212 default
